<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="a11y-media-behaviors.html">

<!--
`a11y-media-play-button`
A giant play button that overlays the media in a11y-media-player

@demo demo/index.html

@microcopy - the mental model for this element
  <a11y-media-play-button
    playing$="[[__playing]]">   // Is the media currently playing?
  </a11y-media-play-button>

Custom styles:
--a11y-play-button-bg-color: overlay background color, default is #000000
--a11y-play-button-arrow-text-color: arrow text color, default is #ffffff
--a11y-play-button-arrow-border-color: arrow stroke color, default is --a11y-play-button-arrow-border-color
--a11y-play-button-arrow-bg-color: arrow stroke color, default is --a11y-play-button-bg-color

Custom focus styles:
--a11y-play-button-focus-bg-color: overlay background color, default is --a11y-play-button-bg-color
--a11y-play-button-focus-arrow-text-color: arrow text color, default is --a11y-play-button-arrow-text-color
--a11y-play-button-focus-arrow-border-color: arrow stroke color, default is --a11y-play-button-arrow-border-color
--a11y-play-button-focus-arrow-bg-color: arrow stroke color, default is --a11y-play-button-arrow-bg-color

-->

<dom-module id="a11y-media-play-button">
  <template>
    <style>
      :host {
        display: block;
        z-index: 2;
        transition: opacity 0.5s;  
      }
      :host:active,
      :host:focus,
      :host:hover {
        cursor: pointer;
      }
      :host[disabled],
      :host[playing] {
        cursor: unset;
        opacity: 0;
      }
      :host, 
      :host #background, 
      :host #button {
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
      }
      :host #background, 
      :host #button {
        height: 100%;
        padding:0;
        margin: 0;
        border: none;
      }
      :host #background {
        opacity: 0.5;
        transition: opacity 0.5s;
        background: var(--a11y-play-button-bg-color, #000000);
      }
      :host:active #background,
      :host:focus #background,
      :host:hover #background {
        background: var(--a11y-play-button-focus-bg-color, --a11y-play-button-bg-color);
        opacity: 0.7;
      }
      :host #button {
        background: transparent;
      }
      :host #arrow {
        stroke: var(--a11y-play-button-arrow-border-color, var(--a11y-play-button-text-color, #ffffff));
        fill: var(--a11y-play-button-arrow-bg-color, var(--a11y-play-button-bg-color, #000000));
      }
      :host:active #arrow,
      :host:focus #arrow,
      :host:hover #arrow {
        stroke: var(--a11y-play-button-focus-arrow-border-color, --a11y-play-button-arrow-border-color);
        fill: var(--a11y-play-button-focus-arrow-focus-bg-color, --a11y-play-button-bg-color);
      }
      :host #text {
        fill: var(--a11y-play-button-text-color, #ffffff);
      }
      :host:active #text,
      :host:focus #text,
      :host:hover #text {
        fill: var(--a11y-play-button-focus-text-color, --a11y-play-button-text-color);
      }
    </style>
    <div id="background"></div>
    <button id="button" aria-hidden="true" tabindex="-1" disabled$="[[disabled]]" controls="video">
      <svg id="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"  width="30%" height="30%" opacity="0.7">
        <g>
          <polygon id="arrow" points="30,20 30,180 170,100" fill="#000000" stroke="#ffffff" stroke-width="15px"/>
          <text id="text" x="50" y="115" fill="#ffffff" font-size="30px">Play</text>
        </g>
      </svg>
    </button>
  </template>

  <script>
    Polymer({

      is: 'a11y-media-play-button',
      
      behaviors: [a11yMediaBehaviors.PlayerBehaviors],

      listeners: {
        'button.tap': '_buttonTap'
      },

      properties: {
        /**
         * button label
         */
         label: {
          type: String,
          computed: '_getLabel(playing)'
        },
        /**
         * is button disabled
         */
         disabled: {
          type: Boolean,
          value: false
        },
      },
      /**
        * get label based on whether or not the video is playing
        */
      _getLabel: function(playing){
        return playing ? 'pause' : 'play';
      },
      /**
        * handle button tap
        */
      _buttonTap: function(){
        this.fire('controls-change',this);
      },
    });
  </script>
</dom-module>
