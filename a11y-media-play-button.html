<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="a11y-media-behaviors.html">

<!--
`a11y-media-play-button`
A giant play button that overlays the media in a11y-media-player

@demo demo/index.html

@microcopy - the mental model for this element
  <a11y-media-play-button
    playing$="[[__playing]]">   // Is the media currently playing?
  </a11y-media-play-button>

  Custom styles: 
  --a11y-media-play-button-background {
    // css for button background
  }
  --a11y-media-play-button-focused-background {
    // css for button background when focused
  } 
  --a11y-media-play-button-arrow {
    // css for button arrow icon
  }
  --a11y-media-play-button-text {
    // css for button text
  }

-->

<dom-module id="a11y-media-play-button">
  <template>
    <style>
      :host {
        display: block;
        z-index: 2;
        transition: opacity 0.5s;  
      }
      :host:active,
      :host:focus,
      :host:hover {
        cursor: pointer;
      }
      :host[disabled],
      :host[playing] {
        cursor: unset;
        opacity: 0;
      }
      :host, 
      :host #background, 
      :host #button {
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
      }
      :host #background, 
      :host #button {
        height: 100%;
        padding:0;
        margin: 0;
        border: none;
      }
      :host #background {
        opacity: 0.5;
        transition: opacity 0.5s;
        @apply(--a11y-media-play-button-background);
      }
      :host:active #background,
      :host:focus #background,
      :host:hover #background {
        opacity: 0.7;
        @apply(--a11y-media-play-button-focused-background);
      }
      :host #button {
        background: transparent;
      }
      :host #arrow {
        @apply(--a11y-media-play-button-arrow);
      }
      :host #text {
        @apply(--a11y-media-play-button-text);
      }
    </style>
    <div id="background"></div>
    <button id="button" aria-hidden="true" tabindex="-1" disabled$="[[disabled]]" controls="video">
      <svg id="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"  width="30%" height="30%" opacity="0.7">
        <g>
          <polygon id="arrow" points="30,20 30,180 170,100" fill="#000000" stroke="#ffffff" stroke-width="15px"/>
          <text id="text" x="50" y="115" fill="#ffffff" font-size="30px">Play</text>
        </g>
      </svg>
    </button>
  </template>

  <script>
    Polymer({

      is: 'a11y-media-play-button',
      
      behaviors: [a11yMediaBehaviors.PlayerBehaviors],

      listeners: {
        'button.tap': '_buttonTap'
      },

      properties: {
        /**
         * button label
         */
         label: {
          type: String,
          value: 'play',
        },
        /**
         * is button disabled
         */
         disabled: {
          type: Boolean,
          value: false,
        },
      },
      /**
        * handle button tap
        */
      _buttonTap: function(){
        this.fire('controls-change',this);
      },
    });
  </script>
</dom-module>
